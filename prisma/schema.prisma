generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model destinations {
  id                     Int                      @id @default(autoincrement())
  title                  String                   @db.VarChar(255)
  description            String?
  location               String?                  @db.VarChar(255)
  image                  String?
  category               String?                  @db.VarChar(100)
  created_by_id          Int?
  users                  users?                   @relation(fields: [created_by_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  itinerary_destinations itinerary_destinations[]
  saved_destinations     saved_destinations[]
}

model itineraries {
  id                     Int                      @id @default(autoincrement())
  title                  String?                  @db.VarChar(255)
  user_id                Int?
  users                  users?                   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  itinerary_destinations itinerary_destinations[]
}

model itinerary_destinations {
  id             Int           @id @default(autoincrement())
  itinerary_id   Int?
  destination_id Int?
  destinations   destinations? @relation(fields: [destination_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  itineraries    itineraries?  @relation(fields: [itinerary_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([itinerary_id, destination_id])
}

model saved_destinations {
  id             Int           @id @default(autoincrement())
  user_id        Int?
  destination_id Int?
  destinations   destinations? @relation(fields: [destination_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users          users?        @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, destination_id])
}

model users {
  id                 Int                  @id @default(autoincrement())
  name               String?              @db.VarChar(100)
  email              String               @unique @db.VarChar(100)
  password_hash      String
  destinations       destinations[]
  itineraries        itineraries[]
  saved_destinations saved_destinations[]
}
